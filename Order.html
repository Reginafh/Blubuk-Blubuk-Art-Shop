<!DOCTYPE html>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Blubuk Blubuk Shop Art</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
    <h1>Checkout / Form Pemesanan</h1>

    <h2>Ringkasan Produk</h2>
    <div id="order-summary"></div>
    <p><strong>Total: Rp <span id="order-total">0</span></strong></p>

    <hr>

    <h2>Informasi Pembeli</h2>
    <form id="order-form">
        <label>Nama Lengkap:</label><br>
        <input type="text" id="nama" required><br><br>

        <label>Alamat Pengiriman:</label><br>
        <textarea id="alamat" required></textarea><br><br>

        <label>Nomor HP / WhatsApp:</label><br>
        <input type="tel" id="telepon" required><br><br>

        <label>Metode Pembayaran:</label><br>
        <select id="pembayaran" required>
            <option value="Transfer Bank">Transfer Bank</option>
            <option value="COD">Bayar di Tempat (COD)</option>
            <option value="QRIS">QRIS</option>
        </select><br><br>

        <button type="submit">Buat Pesanan</button>
    </form>

    <div id="konfirmasi" style="display:none; margin-top: 20px; color: green;"></div>

    <script>
        function tampilkanRingkasan() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const summaryDiv = document.getElementById('order-summary');
            const totalSpan = document.getElementById('order-total');
            let total = 0;

            if (cart.length === 0) {
                summaryDiv.innerHTML = "<p>Tidak ada produk di keranjang.</p>";
                return;
            }

            summaryDiv.innerHTML = '';
            cart.forEach((item) => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <p><strong>${item.name}</strong></p>
                    <p>Varian: ${item.variant}</p>
                    <p>Harga: Rp ${item.price.toLocaleString('id-ID')}</p>
                    <hr>
                `;
                summaryDiv.appendChild(div);
                total += item.price;
            });

            totalSpan.textContent = total.toLocaleString('id-ID');
        }

        document.getElementById('order-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const nama = document.getElementById('nama').value;
            const alamat = document.getElementById('alamat').value;
            const telepon = document.getElementById('telepon').value;
            const pembayaran = document.getElementById('pembayaran').value;
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');

            if (cart.length === 0) {
                alert("Keranjang belanja kosong.");
                return;
            }

            // Format isi pesan
            let pesan = `*Pesanan Baru dari ${nama}*\n\n`;
            pesan += `üì¶ *Daftar Produk:*\n`;

            cart.forEach((item, index) => {
                pesan += `${index + 1}. ${item.name} (Varian: ${item.variant}) - Rp ${item.price.toLocaleString('id-ID')}\n`;
            });

            const total = cart.reduce((sum, item) => sum + item.price, 0);
            pesan += `\nüí∞ *Total:* Rp ${total.toLocaleString('id-ID')}\n`;
            pesan += `\nüìç *Alamat:* ${alamat}`;
            pesan += `\nüì± *No HP/WA:* ${telepon}`;
            pesan += `\nüí≥ *Metode Pembayaran:* ${pembayaran}`;

    // Ganti ini dengan nomor admin kamu
    const nomorAdmin = '6281282826776';
    const urlWA = `https://wa.me/${nomorAdmin}?text=${encodeURIComponent(pesan)}`;

    // Bersihkan keranjang
    localStorage.removeItem('cart');

    // Redirect ke WhatsApp
    window.location.href = urlWA;
    });
    </script>
</body>
</html>
